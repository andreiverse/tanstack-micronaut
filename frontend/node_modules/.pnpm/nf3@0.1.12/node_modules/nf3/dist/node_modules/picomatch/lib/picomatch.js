"use strict";const scan=require(`./scan`),parse=require(`./parse`),utils=require(`./utils`),constants=require(`./constants`),isObject=e=>e&&typeof e==`object`&&!Array.isArray(e),picomatch=(e,n,r=!1)=>{if(Array.isArray(e)){let i=e.map(e=>picomatch(e,n,r));return e=>{for(let n of i){let r=n(e);if(r)return r}return!1}}let i=isObject(e)&&e.tokens&&e.input;if(e===``||typeof e!=`string`&&!i)throw TypeError(`Expected pattern to be a non-empty string`);let o=n||{},s=o.windows,c=i?picomatch.compileRe(e,n):picomatch.makeRe(e,n,!1,!0),l=c.state;delete c.state;let u=()=>!1;if(o.ignore){let e={...n,ignore:null,onMatch:null,onResult:null};u=picomatch(o.ignore,e,r)}let d=(r,i=!1)=>{let{isMatch:a,match:d,output:f}=picomatch.test(r,c,n,{glob:e,posix:s}),p={glob:e,state:l,regex:c,posix:s,input:r,output:f,match:d,isMatch:a};return typeof o.onResult==`function`&&o.onResult(p),a===!1?(p.isMatch=!1,i?p:!1):u(r)?(typeof o.onIgnore==`function`&&o.onIgnore(p),p.isMatch=!1,i?p:!1):(typeof o.onMatch==`function`&&o.onMatch(p),i?p:!0)};return r&&(d.state=l),d};picomatch.test=(e,n,i,{glob:a,posix:o}={})=>{if(typeof e!=`string`)throw TypeError(`Expected input to be a string`);if(e===``)return{isMatch:!1,output:``};let s=i||{},c=s.format||(o?utils.toPosixSlashes:null),l=e===a,u=l&&c?c(e):e;return l===!1&&(u=c?c(e):e,l=u===a),(l===!1||s.capture===!0)&&(l=s.matchBase===!0||s.basename===!0?picomatch.matchBase(e,n,i,o):n.exec(u)),{isMatch:!!l,match:l,output:u}},picomatch.matchBase=(e,n,i)=>(n instanceof RegExp?n:picomatch.makeRe(n,i)).test(utils.basename(e)),picomatch.isMatch=(e,n,r)=>picomatch(n,r)(e),picomatch.parse=(e,r)=>Array.isArray(e)?e.map(e=>picomatch.parse(e,r)):parse(e,{...r,fastpaths:!1}),picomatch.scan=(n,r)=>scan(n,r),picomatch.compileRe=(e,n,r=!1,i=!1)=>{if(r===!0)return e.output;let a=n||{},o=a.contains?``:`^`,s=a.contains?``:`$`,c=`${o}(?:${e.output})${s}`;e&&e.negated===!0&&(c=`^(?!${c}).*$`);let l=picomatch.toRegex(c,n);return i===!0&&(l.state=e),l},picomatch.makeRe=(e,r={},i=!1,a=!1)=>{if(!e||typeof e!=`string`)throw TypeError(`Expected a non-empty string`);let o={negated:!1,fastpaths:!0};return r.fastpaths!==!1&&(e[0]===`.`||e[0]===`*`)&&(o.output=parse.fastpaths(e,r)),o.output||(o=parse(e,r)),picomatch.compileRe(o,r,i,a)},picomatch.toRegex=(e,n)=>{try{let r=n||{};return new RegExp(e,r.flags||(r.nocase?`i`:``))}catch(e){if(n&&n.debug===!0)throw e;return/$^/}},picomatch.constants=constants,module.exports=picomatch;