"use strict";module.exports=exports=clean,exports.usage=`Removes the entire folder containing the compiled .node module`;const fs=require(`fs`),exists=fs.exists||require(`path`).exists,versioning=require(`./util/versioning.js`),napi=require(`./util/napi.js`),path=require(`path`);function clean(a,o,s){let c=a.package_json,l=napi.get_napi_build_version_from_command_args(o),u=versioning.evaluate(c,a.opts,l).module_path;if(u){if(path.normalize(u)===path.normalize(process.cwd()))return s(Error(`module_path is not set, refusing to delete`));exists(u,i=>i?(a.opts.silent_clean||console.log(`[`+c.name+`] Removing "%s"`,u),fs.rm(u,{recursive:!0,force:!0},s)):s())}else return s(Error(`module_path is empty, refusing to delete`))}