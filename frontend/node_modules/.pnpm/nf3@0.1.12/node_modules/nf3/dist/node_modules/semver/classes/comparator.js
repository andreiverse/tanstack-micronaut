"use strict";const ANY=Symbol(`SemVer ANY`);class Comparator{static get ANY(){return ANY}constructor(s,c){if(c=parseOptions(c),s instanceof Comparator){if(s.loose===!!c.loose)return s;s=s.value}s=s.trim().split(/\s+/).join(` `),debug(`comparator`,s,c),this.options=c,this.loose=!!c.loose,this.parse(s),this.semver===ANY?this.value=``:this.value=this.operator+this.semver.version,debug(`comp`,this)}parse(a){let o=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],l=a.match(o);if(!l)throw TypeError(`Invalid comparator: ${a}`);this.operator=l[1]===void 0?``:l[1],this.operator===`=`&&(this.operator=``),l[2]?this.semver=new SemVer(l[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(a){if(debug(`Comparator.test`,a,this.options.loose),this.semver===ANY||a===ANY)return!0;if(typeof a==`string`)try{a=new SemVer(a,this.options)}catch{return!1}return cmp(a,this.operator,this.semver,this.options)}intersects(e,s){if(!(e instanceof Comparator))throw TypeError(`a Comparator is required`);return this.operator===``?this.value===``?!0:new Range(e.value,s).test(this.value):e.operator===``?e.value===``?!0:new Range(this.value,s).test(e.semver):(s=parseOptions(s),s.includePrerelease&&(this.value===`<0.0.0-0`||e.value===`<0.0.0-0`)||!s.includePrerelease&&(this.value.startsWith(`<0.0.0`)||e.value.startsWith(`<0.0.0`))?!1:!!(this.operator.startsWith(`>`)&&e.operator.startsWith(`>`)||this.operator.startsWith(`<`)&&e.operator.startsWith(`<`)||this.semver.version===e.semver.version&&this.operator.includes(`=`)&&e.operator.includes(`=`)||cmp(this.semver,`<`,e.semver,s)&&this.operator.startsWith(`>`)&&e.operator.startsWith(`<`)||cmp(this.semver,`>`,e.semver,s)&&this.operator.startsWith(`<`)&&e.operator.startsWith(`>`)))}}module.exports=Comparator;const parseOptions=require(`../internal/parse-options`),{safeRe:re,t}=require(`../internal/re`),cmp=require(`../functions/cmp`),debug=require(`../internal/debug`),SemVer=require(`./semver`),Range=require(`./range`);