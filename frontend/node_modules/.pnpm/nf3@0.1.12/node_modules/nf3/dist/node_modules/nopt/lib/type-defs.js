const url=require(`url`),path=require(`path`),Stream=require(`stream`).Stream,os=require(`os`),debug=require(`./debug`);function validateString(e,o,s){e[o]=String(s)}function validatePath(e,s,l){if(l===!0)return!1;if(l===null)return!0;l=String(l);let u=process.platform===`win32`?/^~(\/|\\)/:/^~\//,d=os.homedir();return d&&l.match(u)?e[s]=path.resolve(d,l.slice(2)):e[s]=path.resolve(l),!0}function validateNumber(e,o,s){if(debug(`validate Number %j %j %j`,o,s,isNaN(s)),isNaN(s))return!1;e[o]=+s}function validateDate(e,o,s){let c=Date.parse(s);if(debug(`validate Date %j %j %j`,o,s,c),isNaN(c))return!1;e[o]=new Date(s)}function validateBoolean(e,o,s){s=typeof s==`string`?isNaN(s)?!(s===`null`||s===`false`):!!+s:!!s,e[o]=s}function validateUrl(o,s,c){if(c=url.parse(String(c)),!c.host)return!1;o[s]=c.href}function validateStream(e,o,c){if(!(c instanceof Stream))return!1;e[o]=c}module.exports={String:{type:String,validate:validateString},Boolean:{type:Boolean,validate:validateBoolean},url:{type:url,validate:validateUrl},Number:{type:Number,validate:validateNumber},path:{type:path,validate:validatePath},Stream:{type:Stream,validate:validateStream},Date:{type:Date,validate:validateDate},Array:{type:Array}};