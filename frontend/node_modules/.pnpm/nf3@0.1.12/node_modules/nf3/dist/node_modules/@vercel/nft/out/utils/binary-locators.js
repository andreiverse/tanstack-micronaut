"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.pregyp=void 0,exports.nbind=nbind;const path_1=__importDefault(require(`path`)),graceful_fs_1=__importDefault(require(`graceful-fs`)),versioning=require(`@mapbox/node-pre-gyp/lib/util/versioning.js`),napi=require(`@mapbox/node-pre-gyp/lib/util/napi.js`),pregypFind=(package_json_path,opts)=>{let package_json=JSON.parse(graceful_fs_1.default.readFileSync(package_json_path).toString());versioning.validate_config(package_json,opts);var napi_build_version;return napi.get_napi_build_versions(package_json,opts)&&(napi_build_version=napi.get_best_napi_build_version(package_json,opts)),opts||={},opts.module_root||=path_1.default.dirname(package_json_path),versioning.evaluate(package_json,opts,napi_build_version).module};exports.pregyp={default:{find:pregypFind},find:pregypFind};function makeModulePathList(root,name){return[[root,name],[root,`build`,name],[root,`build`,`Debug`,name],[root,`build`,`Release`,name],[root,`out`,`Debug`,name],[root,`Debug`,name],[root,`out`,`Release`,name],[root,`Release`,name],[root,`build`,`default`,name],[root,process.env.NODE_BINDINGS_COMPILED_DIR||`compiled`,process.versions.node,process.platform,process.arch,name]]}function findCompiledModule(basePath,specList){for(var resolvedList=[],ext=path_1.default.extname(basePath),_i=0,specList_1=specList;_i<specList_1.length;_i++){var spec=specList_1[_i];if(ext==spec.ext)try{return spec.path=eval(`require.resolve(basePath)`),spec}catch{resolvedList.push(basePath)}}for(var _a=0,specList_2=specList;_a<specList_2.length;_a++)for(var spec=specList_2[_a],_b=0,_c=makeModulePathList(basePath,spec.name);_b<_c.length;_b++){var pathParts=_c[_b],resolvedPath=path_1.default.resolve.apply(path_1.default,pathParts);try{spec.path=eval(`require.resolve(resolvedPath)`)}catch{resolvedList.push(resolvedPath);continue}return spec}return null}function nbind(basePath=process.cwd()){return findCompiledModule(basePath,[{ext:`.node`,name:`nbind.node`,type:`node`},{ext:`.js`,name:`nbind.js`,type:`emcc`}])}