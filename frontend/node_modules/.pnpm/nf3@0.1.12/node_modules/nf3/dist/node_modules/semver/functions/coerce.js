"use strict";const SemVer=require(`../classes/semver`),parse=require(`./parse`),{safeRe:re,t}=require(`../internal/re`),coerce=(a,o)=>{if(a instanceof SemVer)return a;if(typeof a==`number`&&(a=String(a)),typeof a!=`string`)return null;o||={};let s=null;if(!o.rtl)s=a.match(o.includePrerelease?re[t.COERCEFULL]:re[t.COERCE]);else{let e=o.includePrerelease?re[t.COERCERTLFULL]:re[t.COERCERTL],i;for(;(i=e.exec(a))&&(!s||s.index+s[0].length!==a.length);)(!s||i.index+i[0].length!==s.index+s[0].length)&&(s=i),e.lastIndex=i.index+i[1].length+i[2].length;e.lastIndex=-1}if(s===null)return null;let c=s[2];return parse(`${c}.${s[3]||`0`}.${s[4]||`0`}${o.includePrerelease&&s[5]?`-${s[5]}`:``}${o.includePrerelease&&s[6]?`+${s[6]}`:``}`,o)};module.exports=coerce;